import{W as a,S as c,C as l,G as h,A as d,a as m,P as u}from"./vendor.1a2a04e0.js";const f=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};f();class g{constructor(e){this.camera=null,this.renderer=new a({canvas:e,antialias:!0,depth:!0}),this.scene=new c,this.animationMixer=null,this.animationClip=null,this.animationAction=null,this.time=0,this.progress=0,this.clock=new l}async init(){const i=await new h().loadAsync("./assets/animationTest.glb");console.log(i),this.camera=i.cameras[0],this.scene.add(i.scene),this.animationClip=i.animations[0],this.animationMixer=new d(this.camera.parent),this.animationAction=this.animationMixer.clipAction(this.animationClip);const n=new m(16777215,.8);this.scene.add(n);const t=new u(16777215,.2);t.position.set(10,-10,40),this.scene.add(t)}resize(e,i){this.setRenderer(e,i),this.setCamera(e,i)}setRenderer(e,i){this.renderer.setSize(e,i)}setCamera(e,i){this.camera.aspect=e/i,this.camera.far=1e4,this.camera.updateProjectionMatrix()}start(){this.animationAction.play(),this.animate()}animate(){requestAnimationFrame(this.animate.bind(this));const e=this.animationClip.duration*this.progress;this.time+=(e-this.time)*.2,this.animationMixer.setTime(this.time),this.renderer.render(this.scene,this.camera)}setProgress(e){e<0||e>1||(this.progress=e)}}class p{constructor(){this.webgl=new g(document.querySelector(".canvas")),this.container=document.querySelector(".contents"),this.documentElement=document.documentElement,this.resolution={width:0,height:0,documentHeight:0},this.progress=0,this.init()}async init(){await this.webgl.init(),this.handleResize(),this.bind(),this.webgl.start()}bind(){window.addEventListener("resize",this.handleResize.bind(this)),window.addEventListener("scroll",this.handleScroll.bind(this))}handleScroll(e){const n=window.scrollY/(this.resolution.documentHeight-this.resolution.height);console.log(n),this.webgl.setProgress(n)}handleResize(){this.resolution.width=window.innerWidth,this.resolution.height=window.innerHeight,this.resolution.documentHeight=this.documentElement.scrollHeight,this.webgl.resize(this.resolution.width,this.resolution.height)}}class w{constructor(){new p}}new w;
